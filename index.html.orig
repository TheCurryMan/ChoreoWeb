<!doctype html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <link href="./styles.css" rel="stylesheet">

    <title>ChoreoCompare</title>
    <link href="https://vjs.zencdn.net/7.2.4/video-js.css" rel="stylesheet">
</head>

<body>
<h2 id="header">ChoreoCompare</h2>
<div id="videos-container">
    <div id="teacher" class="video-container">
        <h2>Teacher</h2>
        <video id="teacher-video" class="video-js" controls data-setup='{"fluid": true}' muted>
            <source src="" type="video/mp4">
            <p class="vjs-no-js">
                To view this video please enable JavaScript, and consider upgrading to a web browser that
                <a href="https://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a>
            </p>
        </video>
    </div>

    <div id="student" class="video-container">
        <h2>Student</h2>
        <div style="position:relative">

            <canvas id="overlay" style="position:absolute;z-index: 1000;width:100%;height:100%;left:0;top:0"></canvas>

            <video id="student-video" class="video-js" controls data-setup='{"fluid": true}' muted>
                <source src="" type="video/mp4">

                <p class="vjs-no-js">
                    To view this video please enable JavaScript, and consider upgrading to a web browser that
                    <a href="https://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a>
                </p>
            </video>
        </div>
    </div>
</div>

<div class="container">
    <div id="scrollBar">
        <div id="tick" class="ticker">
            <button onclick="timestampClick(event)">
            </button>
        </div>
    </div>
    <p class='time' style="float:left">0:00</p>
    <p class='time' style="float:right">0:05</p>

    <div class="playpause">
        <input type="checkbox" id="playpause" name="check" checked onclick="playpause(event)"/>
        <label for="playpause" tabindex=1></label>
    </div>
</div>


<script src="https://vjs.zencdn.net/7.2.4/video.js"></script>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>

<script src="https://www.gstatic.com/firebasejs/5.5.7/firebase.js"></script>

<script>
    var data = {'0': [[0.3695652173913043, 0.15217391304347827], [0.3695652173913043, 0.2608695652173913], [0.34782608695652173, 0.30434782608695654], [0.2608695652173913, 0.34782608695652173], [0.17391304347826086, 0.391304347826087], [0.43478260869565216, 0.2826086956521739], [0.45652173913043476, 0.41304347826086957], [0.45652173913043476, 0.5217391304347826], [0.3695652173913043, 0.5434782608695652], [0.34782608695652173, 0.717391304347826], [0.34782608695652173, 0.8913043478260869], [0.41304347826086957, 0.5434782608695652], [0.43478260869565216, 0.6956521739130435], [0.43478260869565216, 0.8913043478260869], [0.391304347826087, 0.41304347826086957]], '2': [[0.3695652173913043, 0.13043478260869565], [0.3695652173913043, 0.2391304347826087], [0.32608695652173914, 0.30434782608695654], [0.2608695652173913, 0.34782608695652173], [0.17391304347826086, 0.3695652173913043], [0.43478260869565216, 0.2826086956521739], [0.45652173913043476, 0.391304347826087], [0.4782608695652174, 0.5], [0.3695652173913043, 0.5217391304347826], [0.34782608695652173, 0.6956521739130435], [0.34782608695652173, 0.8913043478260869], [0.41304347826086957, 0.5217391304347826], [0.43478260869565216, 0.6956521739130435], [0.43478260869565216, 0.8913043478260869], [0.391304347826087, 0.41304347826086957]], '4': [[0.391304347826087, 0.13043478260869565], [0.391304347826087, 0.2391304347826087], [0.32608695652173914, 0.30434782608695654], [0.2608695652173913, 0.34782608695652173], [0.17391304347826086, 0.3695652173913043], [0.43478260869565216, 0.2826086956521739], [0.45652173913043476, 0.391304347826087], [0.4782608695652174, 0.43478260869565216], [0.3695652173913043, 0.5217391304347826], [0.34782608695652173, 0.6956521739130435], [0.34782608695652173, 0.8913043478260869], [0.41304347826086957, 0.5217391304347826], [0.43478260869565216, 0.6956521739130435], [0.43478260869565216, 0.8913043478260869], [0.391304347826087, 0.41304347826086957]], '6': [[0.391304347826087, 0.15217391304347827], [0.391304347826087, 0.2391304347826087], [0.32608695652173914, 0.2826086956521739], [0.2608695652173913, 0.34782608695652173], [0.17391304347826086, 0.391304347826087], [0.43478260869565216, 0.2826086956521739], [0.45652173913043476, 0.41304347826086957], [0.5, 0.391304347826087], [0.3695652173913043, 0.5217391304347826], [0.34782608695652173, 0.717391304347826], [0.34782608695652173, 0.8913043478260869], [0.41304347826086957, 0.5217391304347826], [0.43478260869565216, 0.6956521739130435], [0.43478260869565216, 0.8913043478260869], [0.391304347826087, 0.41304347826086957]], '8': [[0.41304347826086957, 0.15217391304347827], [0.391304347826087, 0.2608695652173913], [0.32608695652173914, 0.2826086956521739], [0.2608695652173913, 0.34782608695652173], [0.1956521739130435, 0.391304347826087], [0.43478260869565216, 0.30434782608695654], [0.4782608695652174, 0.391304347826087], [0.5217391304347826, 0.3695652173913043], [0.3695652173913043, 0.5217391304347826], [0.34782608695652173, 0.6956521739130435], [0.34782608695652173, 0.8913043478260869], [0.41304347826086957, 0.5217391304347826], [0.43478260869565216, 0.6956521739130435], [0.43478260869565216, 0.8913043478260869], [0.391304347826087, 0.41304347826086957]], '10': [[0.41304347826086957, 0.15217391304347827], [0.391304347826087, 0.2608695652173913], [0.34782608695652173, 0.2826086956521739], [0.2826086956521739, 0.34782608695652173], [0.1956521739130435, 0.41304347826086957], [0.43478260869565216, 0.30434782608695654], [0.5, 0.3695652173913043], [0.5652173913043478, 0.3695652173913043], [0.3695652173913043, 0.5217391304347826], [0.34782608695652173, 0.6956521739130435], [0.34782608695652173, 0.8913043478260869], [0.41304347826086957, 0.5217391304347826], [0.43478260869565216, 0.6739130434782609], [0.43478260869565216, 0.8913043478260869], [0.391304347826087, 0.41304347826086957]], '12': [[0.41304347826086957, 0.15217391304347827], [0.391304347826087, 0.2391304347826087], [0.34782608695652173, 0.2826086956521739], [0.2608695652173913, 0.34782608695652173], [0.1956521739130435, 0.391304347826087], [0.43478260869565216, 0.2826086956521739], [0.5, 0.34782608695652173], [0.5869565217391305, 0.3695652173913043], [0.3695652173913043, 0.5217391304347826], [0.34782608695652173, 0.6956521739130435], [0.34782608695652173, 0.8913043478260869], [0.41304347826086957, 0.5217391304347826], [0.43478260869565216, 0.6956521739130435], [0.43478260869565216, 0.8913043478260869], [0.391304347826087, 0.41304347826086957]], '14': [[0.391304347826087, 0.15217391304347827], [0.391304347826087, 0.2391304347826087], [0.32608695652173914, 0.2826086956521739], [0.2608695652173913, 0.30434782608695654], [0.21739130434782608, 0.3695652173913043], [0.43478260869565216, 0.2826086956521739], [0.5, 0.32608695652173914], [0.5869565217391305, 0.3695652173913043], [0.3695652173913043, 0.5217391304347826], [0.3695652173913043, 0.717391304347826], [0.34782608695652173, 0.8913043478260869], [0.41304347826086957, 0.5217391304347826], [0.43478260869565216, 0.6956521739130435], [0.43478260869565216, 0.8913043478260869], [0.391304347826087, 0.391304347826087]], '16': [[0.391304347826087, 0.15217391304347827], [0.391304347826087, 0.2391304347826087], [0.32608695652173914, 0.2608695652173913], [0.2391304347826087, 0.32608695652173914], [0.2391304347826087, 0.41304347826086957], [0.43478260869565216, 0.2826086956521739], [0.5, 0.32608695652173914], [0.5652173913043478, 0.34782608695652173], [0.3695652173913043, 0.5217391304347826], [0.3695652173913043, 0.6956521739130435], [0.34782608695652173, 0.8913043478260869], [0.41304347826086957, 0.5217391304347826], [0.43478260869565216, 0.6739130434782609], [0.43478260869565216, 0.8913043478260869], [0.391304347826087, 0.391304347826087]], '18': [[0.3695652173913043, 0.13043478260869565], [0.3695652173913043, 0.2391304347826087], [0.32608695652173914, 0.2826086956521739], [0.2608695652173913, 0.34782608695652173], [0.21739130434782608, 0.32608695652173914], [0.43478260869565216, 0.2826086956521739], [0.5, 0.32608695652173914], [0.5652173913043478, 0.34782608695652173], [0.3695652173913043, 0.5217391304347826], [0.3695652173913043, 0.717391304347826], [0.43478260869565216, 0.8913043478260869], [0.41304347826086957, 0.5217391304347826], [0.43478260869565216, 0.6956521739130435], [0.43478260869565216, 0.8913043478260869], [0.391304347826087, 0.391304347826087]], '20': [[0.3695652173913043, 0.15217391304347827], [0.3695652173913043, 0.2391304347826087], [0.32608695652173914, 0.30434782608695654], [0.2608695652173913, 0.34782608695652173], [0.17391304347826086, 0.34782608695652173], [0.43478260869565216, 0.2826086956521739], [0.5, 0.32608695652173914], [0.5652173913043478, 0.34782608695652173], [0.3695652173913043, 0.5217391304347826], [0.34782608695652173, 0.6739130434782609], [0.43478260869565216, 0.8913043478260869], [0.41304347826086957, 0.5217391304347826], [0.43478260869565216, 0.6739130434782609], [0.3695652173913043, 0.8913043478260869], [0.391304347826087, 0.391304347826087]], '22': [[0.3695652173913043, 0.15217391304347827], [0.3695652173913043, 0.2391304347826087], [0.32608695652173914, 0.30434782608695654], [0.2608695652173913, 0.34782608695652173], [0.17391304347826086, 0.391304347826087], [0.43478260869565216, 0.2826086956521739], [0.4782608695652174, 0.34782608695652173], [0.5652173913043478, 0.34782608695652173], [0.391304347826087, 0.5217391304347826], [0.43478260869565216, 0.6739130434782609], [0.43478260869565216, 0.8913043478260869], [0.41304347826086957, 0.5217391304347826], [0.3695652173913043, 0.6739130434782609], [0.3695652173913043, 0.8913043478260869], [0.391304347826087, 0.391304347826087]], '24': [[0.3695652173913043, 0.15217391304347827], [0.3695652173913043, 0.2391304347826087], [0.32608695652173914, 0.30434782608695654], [0.2608695652173913, 0.34782608695652173], [0.1956521739130435, 0.391304347826087], [0.43478260869565216, 0.2826086956521739], [0.4782608695652174, 0.34782608695652173], [0.5434782608695652, 0.34782608695652173], [0.3695652173913043, 0.5217391304347826], [0.3695652173913043, 0.717391304347826], [0.43478260869565216, 0.8913043478260869], [0.41304347826086957, 0.5217391304347826], [0.43478260869565216, 0.6956521739130435], [0.43478260869565216, 0.8913043478260869], [0.391304347826087, 0.41304347826086957]], '26': [[0.3695652173913043, 0.15217391304347827], [0.3695652173913043, 0.2391304347826087], [0.32608695652173914, 0.30434782608695654], [0.2608695652173913, 0.34782608695652173], [0.1956521739130435, 0.391304347826087], [0.43478260869565216, 0.2826086956521739], [0.4782608695652174, 0.3695652173913043], [0.5434782608695652, 0.32608695652173914], [0.391304347826087, 0.5217391304347826], [0.43478260869565216, 0.6956521739130435], [0.43478260869565216, 0.8913043478260869], [0.3695652173913043, 0.5217391304347826], [0.34782608695652173, 0.717391304347826], [0.34782608695652173, 0.8913043478260869], [0.391304347826087, 0.391304347826087]], '28': [[0.3695652173913043, 0.15217391304347827], [0.3695652173913043, 0.2391304347826087], [0.32608695652173914, 0.30434782608695654], [0.2608695652173913, 0.34782608695652173], [0.17391304347826086, 0.3695652173913043], [0.43478260869565216, 0.2826086956521739], [0.4782608695652174, 0.3695652173913043], [0.5217391304347826, 0.32608695652173914], [0.3695652173913043, 0.5217391304347826], [0.3695652173913043, 0.6956521739130435], [0.43478260869565216, 0.8913043478260869], [0.41304347826086957, 0.5217391304347826], [0.43478260869565216, 0.6956521739130435], [0.43478260869565216, 0.8913043478260869], [0.391304347826087, 0.41304347826086957]], '30': [[0.391304347826087, 0.15217391304347827], [0.391304347826087, 0.2391304347826087], [0.32608695652173914, 0.2826086956521739], [0.2608695652173913, 0.34782608695652173], [0.1956521739130435, 0.3695652173913043], [0.43478260869565216, 0.2826086956521739], [0.5, 0.3695652173913043], [0.5652173913043478, 0.32608695652173914], [0.3695652173913043, 0.5217391304347826], [0.34782608695652173, 0.6956521739130435], [0.43478260869565216, 0.8913043478260869], [0.41304347826086957, 0.5217391304347826], [0.43478260869565216, 0.6956521739130435], [0.43478260869565216, 0.8913043478260869], [0.391304347826087, 0.41304347826086957]], '32': [[0.391304347826087, 0.15217391304347827], [0.391304347826087, 0.2608695652173913], [0.32608695652173914, 0.2826086956521739], [0.2608695652173913, 0.34782608695652173], [0.1956521739130435, 0.3695652173913043], [0.43478260869565216, 0.2826086956521739], [0.5, 0.34782608695652173], [0.5869565217391305, 0.34782608695652173], [0.3695652173913043, 0.5434782608695652], [0.3695652173913043, 0.717391304347826], [0.34782608695652173, 0.8913043478260869], [0.41304347826086957, 0.5434782608695652], [0.43478260869565216, 0.6956521739130435], [0.43478260869565216, 0.8913043478260869], [0.391304347826087, 0.41304347826086957]], '34': [[0.391304347826087, 0.15217391304347827], [0.391304347826087, 0.2391304347826087], [0.32608695652173914, 0.2826086956521739], [0.2826086956521739, 0.32608695652173914], [0.1956521739130435, 0.34782608695652173], [0.43478260869565216, 0.2826086956521739], [0.5, 0.34782608695652173], [0.5652173913043478, 0.3695652173913043], [0.3695652173913043, 0.5217391304347826], [0.34782608695652173, 0.6956521739130435], [0.34782608695652173, 0.8913043478260869], [0.41304347826086957, 0.5217391304347826], [0.43478260869565216, 0.6956521739130435], [0.43478260869565216, 0.8913043478260869], [0.391304347826087, 0.41304347826086957]], '36': [[0.391304347826087, 0.15217391304347827], [0.391304347826087, 0.2391304347826087], [0.32608695652173914, 0.2826086956521739], [0.2608695652173913, 0.34782608695652173], [0.1956521739130435, 0.32608695652173914], [0.43478260869565216, 0.2826086956521739], [0.5, 0.34782608695652173], [0.5652173913043478, 0.3695652173913043], [0.3695652173913043, 0.5217391304347826], [0.3695652173913043, 0.717391304347826], [0.3695652173913043, 0.8913043478260869], [0.41304347826086957, 0.5217391304347826], [0.43478260869565216, 0.6956521739130435], [0.43478260869565216, 0.8913043478260869], [0.391304347826087, 0.41304347826086957]], '38': [[0.3695652173913043, 0.15217391304347827], [0.391304347826087, 0.2391304347826087], [0.34782608695652173, 0.30434782608695654], [0.2826086956521739, 0.34782608695652173], [0.21739130434782608, 0.2608695652173913], [0.43478260869565216, 0.2826086956521739], [0.5, 0.34782608695652173], [0.5652173913043478, 0.3695652173913043], [0.3695652173913043, 0.5434782608695652], [0.34782608695652173, 0.6956521739130435], [0.34782608695652173, 0.8913043478260869], [0.41304347826086957, 0.5434782608695652], [0.43478260869565216, 0.6956521739130435], [0.43478260869565216, 0.8913043478260869], [0.391304347826087, 0.41304347826086957]], '40': [[0.3695652173913043, 0.15217391304347827], [0.3695652173913043, 0.2391304347826087], [0.32608695652173914, 0.30434782608695654], [0.2826086956521739, 0.34782608695652173], [0.2826086956521739, 0.2391304347826087], [0.43478260869565216, 0.2826086956521739], [0.4782608695652174, 0.34782608695652173], [0.5652173913043478, 0.3695652173913043], [0.3695652173913043, 0.5434782608695652], [0.3695652173913043, 0.6956521739130435], [0.34782608695652173, 0.8913043478260869], [0.41304347826086957, 0.5217391304347826], [0.43478260869565216, 0.6956521739130435], [0.43478260869565216, 0.8913043478260869], [0.391304347826087, 0.41304347826086957]], '42': [[0.3695652173913043, 0.15217391304347827], [0.3695652173913043, 0.2608695652173913], [0.32608695652173914, 0.2826086956521739], [0.30434782608695654, 0.34782608695652173], [0.32608695652173914, 0.2608695652173913], [0.41304347826086957, 0.2826086956521739], [0.4782608695652174, 0.34782608695652173], [0.5652173913043478, 0.3695652173913043], [0.3695652173913043, 0.5217391304347826], [0.3695652173913043, 0.6956521739130435], [0.34782608695652173, 0.8913043478260869], [0.41304347826086957, 0.5217391304347826], [0.43478260869565216, 0.6956521739130435], [0.43478260869565216, 0.8913043478260869], [0.391304347826087, 0.41304347826086957]], '44': [[0.3695652173913043, 0.15217391304347827], [0.3695652173913043, 0.2608695652173913], [0.32608695652173914, 0.30434782608695654], [0.30434782608695654, 0.34782608695652173], [0.3695652173913043, 0.30434782608695654], [0.43478260869565216, 0.2826086956521739], [0.4782608695652174, 0.34782608695652173], [0.5652173913043478, 0.3695652173913043], [0.3695652173913043, 0.5217391304347826], [0.34782608695652173, 0.6739130434782609], [0.34782608695652173, 0.8260869565217391], [0.41304347826086957, 0.5217391304347826], [0.43478260869565216, 0.6739130434782609], [0.43478260869565216, 0.8913043478260869], [0.391304347826087, 0.41304347826086957]], '46': [[0.3695652173913043, 0.15217391304347827], [0.3695652173913043, 0.2391304347826087], [0.32608695652173914, 0.30434782608695654], [0.32608695652173914, 0.34782608695652173], [0.3695652173913043, 0.2826086956521739], [0.43478260869565216, 0.2826086956521739], [0.5, 0.34782608695652173], [0.5434782608695652, 0.30434782608695654], [0.3695652173913043, 0.5434782608695652], [0.34782608695652173, 0.6956521739130435], [0.34782608695652173, 0.8913043478260869], [0.41304347826086957, 0.5434782608695652], [0.43478260869565216, 0.6956521739130435], [0.43478260869565216, 0.8913043478260869], [0.391304347826087, 0.41304347826086957]], '48': [[0.3695652173913043, 0.15217391304347827], [0.391304347826087, 0.2391304347826087], [0.32608695652173914, 0.2826086956521739], [0.32608695652173914, 0.34782608695652173], [0.391304347826087, 0.2826086956521739], [0.43478260869565216, 0.2826086956521739], [0.5, 0.34782608695652173], [0.5, 0.2826086956521739], [0.3695652173913043, 0.5217391304347826], [0.34782608695652173, 0.6956521739130435], [0.34782608695652173, 0.8913043478260869], [0.41304347826086957, 0.5217391304347826], [0.43478260869565216, 0.6739130434782609], [0.43478260869565216, 0.8913043478260869], [0.391304347826087, 0.41304347826086957]], '50': [[0.391304347826087, 0.15217391304347827], [0.391304347826087, 0.2608695652173913], [0.34782608695652173, 0.2826086956521739], [0.34782608695652173, 0.34782608695652173], [0.391304347826087, 0.30434782608695654], [0.43478260869565216, 0.2826086956521739], [0.5, 0.34782608695652173], [0.4782608695652174, 0.2391304347826087], [0.3695652173913043, 0.5217391304347826], [0.34782608695652173, 0.6956521739130435], [0.3695652173913043, 0.8913043478260869], [0.41304347826086957, 0.5217391304347826], [0.43478260869565216, 0.6956521739130435], [0.43478260869565216, 0.8913043478260869], [0.391304347826087, 0.41304347826086957]], '52': [[0.391304347826087, 0.15217391304347827], [0.391304347826087, 0.2608695652173913], [0.34782608695652173, 0.30434782608695654], [0.34782608695652173, 0.3695652173913043], [0.391304347826087, 0.32608695652173914], [0.43478260869565216, 0.30434782608695654], [0.4782608695652174, 0.32608695652173914], [0.43478260869565216, 0.2608695652173913], [0.3695652173913043, 0.5434782608695652], [0.3695652173913043, 0.717391304347826], [0.3695652173913043, 0.9130434782608695], [0.41304347826086957, 0.5434782608695652], [0.43478260869565216, 0.6956521739130435], [0.43478260869565216, 0.9130434782608695], [0.391304347826087, 0.41304347826086957]], '54': [[0.391304347826087, 0.15217391304347827], [0.391304347826087, 0.2608695652173913], [0.34782608695652173, 0.30434782608695654], [0.32608695652173914, 0.41304347826086957], [0.391304347826087, 0.3695652173913043], [0.45652173913043476, 0.32608695652173914], [0.45652173913043476, 0.32608695652173914], [0.391304347826087, 0.2826086956521739], [0.3695652173913043, 0.5434782608695652], [0.3695652173913043, 0.717391304347826], [0.3695652173913043, 0.9130434782608695], [0.41304347826086957, 0.5434782608695652], [0.43478260869565216, 0.6956521739130435], [0.43478260869565216, 0.9130434782608695], [0.391304347826087, 0.43478260869565216]], '56': [[0.391304347826087, 0.15217391304347827], [0.391304347826087, 0.2608695652173913], [0.34782608695652173, 0.30434782608695654], [0.30434782608695654, 0.41304347826086957], [0.3695652173913043, 0.43478260869565216], [0.45652173913043476, 0.30434782608695654], [0.45652173913043476, 0.34782608695652173], [0.391304347826087, 0.30434782608695654], [0.3695652173913043, 0.5434782608695652], [0.3695652173913043, 0.717391304347826], [0.3695652173913043, 0.9130434782608695], [0.41304347826086957, 0.5434782608695652], [0.43478260869565216, 0.717391304347826], [0.43478260869565216, 0.9130434782608695], [0.391304347826087, 0.43478260869565216]], '58': [[0.391304347826087, 0.15217391304347827], [0.391304347826087, 0.2608695652173913], [0.34782608695652173, 0.30434782608695654], [0.2826086956521739, 0.391304347826087], [0.30434782608695654, 0.45652173913043476], [0.45652173913043476, 0.30434782608695654], [0.45652173913043476, 0.34782608695652173], [0.391304347826087, 0.30434782608695654], [0.3695652173913043, 0.5434782608695652], [0.3695652173913043, 0.717391304347826], [0.3695652173913043, 0.8913043478260869], [0.43478260869565216, 0.5434782608695652], [0.43478260869565216, 0.6956521739130435], [0.43478260869565216, 0.9130434782608695], [0.391304347826087, 0.43478260869565216]], '60': [[0.391304347826087, 0.15217391304347827], [0.391304347826087, 0.2608695652173913], [0.34782608695652173, 0.30434782608695654], [0.2608695652173913, 0.391304347826087], [0.2608695652173913, 0.45652173913043476], [0.43478260869565216, 0.2826086956521739], [0.45652173913043476, 0.34782608695652173], [0.391304347826087, 0.30434782608695654], [0.3695652173913043, 0.5434782608695652], [0.3695652173913043, 0.6956521739130435], [0.3695652173913043, 0.8695652173913043], [0.43478260869565216, 0.5434782608695652], [0.43478260869565216, 0.6956521739130435], [0.43478260869565216, 0.9130434782608695], [0.391304347826087, 0.43478260869565216]], '62': [[0.3695652173913043, 0.15217391304347827], [0.391304347826087, 0.2608695652173913], [0.32608695652173914, 0.32608695652173914], [0.2608695652173913, 0.391304347826087], [0.2391304347826087, 0.2826086956521739], [0.43478260869565216, 0.2826086956521739], [0.4782608695652174, 0.3695652173913043], [0.391304347826087, 0.32608695652173914], [0.3695652173913043, 0.5434782608695652], [0.3695652173913043, 0.6956521739130435], [0.3695652173913043, 0.8695652173913043], [0.43478260869565216, 0.5434782608695652], [0.43478260869565216, 0.6956521739130435], [0.43478260869565216, 0.9130434782608695], [0.391304347826087, 0.43478260869565216]], '64': [[0.34782608695652173, 0.17391304347826086], [0.3695652173913043, 0.2608695652173913], [0.32608695652173914, 0.32608695652173914], [0.2608695652173913, 0.3695652173913043], [0.2826086956521739, 0.2391304347826087], [0.43478260869565216, 0.2826086956521739], [0.4782608695652174, 0.3695652173913043], [0.41304347826086957, 0.34782608695652173], [0.3695652173913043, 0.5434782608695652], [0.3695652173913043, 0.6956521739130435], [0.3695652173913043, 0.8695652173913043], [0.43478260869565216, 0.5434782608695652], [0.43478260869565216, 0.6739130434782609], [0.43478260869565216, 0.8913043478260869], [0.391304347826087, 0.43478260869565216]], '66': [[0.34782608695652173, 0.17391304347826086], [0.3695652173913043, 0.2608695652173913], [0.32608695652173914, 0.32608695652173914], [0.2608695652173913, 0.34782608695652173], [0.30434782608695654, 0.2608695652173913], [0.43478260869565216, 0.2826086956521739], [0.5, 0.3695652173913043], [0.45652173913043476, 0.34782608695652173], [0.3695652173913043, 0.5434782608695652], [0.3695652173913043, 0.717391304347826], [0.3695652173913043, 0.9130434782608695], [0.41304347826086957, 0.5434782608695652], [0.43478260869565216, 0.6956521739130435], [0.43478260869565216, 0.9130434782608695], [0.391304347826087, 0.41304347826086957]], '68': [[0.34782608695652173, 0.15217391304347827], [0.3695652173913043, 0.2608695652173913], [0.32608695652173914, 0.32608695652173914], [0.2608695652173913, 0.34782608695652173], [0.30434782608695654, 0.2391304347826087], [0.43478260869565216, 0.2826086956521739], [0.5, 0.34782608695652173], [0.4782608695652174, 0.32608695652173914], [0.3695652173913043, 0.5434782608695652], [0.3695652173913043, 0.717391304347826], [0.3695652173913043, 0.9130434782608695], [0.41304347826086957, 0.5434782608695652], [0.43478260869565216, 0.717391304347826], [0.43478260869565216, 0.9130434782608695], [0.391304347826087, 0.41304347826086957]], '70': [[0.3695652173913043, 0.15217391304347827], [0.3695652173913043, 0.2608695652173913], [0.32608695652173914, 0.30434782608695654], [0.2608695652173913, 0.32608695652173914], [0.30434782608695654, 0.2391304347826087], [0.43478260869565216, 0.2826086956521739], [0.5, 0.34782608695652173], [0.4782608695652174, 0.2826086956521739], [0.3695652173913043, 0.5434782608695652], [0.3695652173913043, 0.717391304347826], [0.3695652173913043, 0.9130434782608695], [0.43478260869565216, 0.5434782608695652], [0.43478260869565216, 0.717391304347826], [0.43478260869565216, 0.9130434782608695], [0.391304347826087, 0.41304347826086957]], '72': [[0.391304347826087, 0.15217391304347827], [0.391304347826087, 0.2608695652173913], [0.32608695652173914, 0.30434782608695654], [0.2608695652173913, 0.32608695652173914], [0.30434782608695654, 0.2608695652173913], [0.43478260869565216, 0.2826086956521739], [0.5217391304347826, 0.34782608695652173], [0.4782608695652174, 0.2391304347826087], [0.3695652173913043, 0.5434782608695652], [0.3695652173913043, 0.717391304347826], [0.3695652173913043, 0.9130434782608695], [0.41304347826086957, 0.5434782608695652], [0.43478260869565216, 0.717391304347826], [0.43478260869565216, 0.9130434782608695], [0.391304347826087, 0.43478260869565216]], '74': [[0.391304347826087, 0.15217391304347827], [0.391304347826087, 0.2608695652173913], [0.32608695652173914, 0.30434782608695654], [0.2608695652173913, 0.34782608695652173], [0.30434782608695654, 0.2608695652173913], [0.45652173913043476, 0.30434782608695654], [0.5, 0.32608695652173914], [0.4782608695652174, 0.2391304347826087], [0.3695652173913043, 0.5434782608695652], [0.3695652173913043, 0.717391304347826], [0.3695652173913043, 0.9130434782608695], [0.43478260869565216, 0.5434782608695652], [0.43478260869565216, 0.717391304347826], [0.43478260869565216, 0.9130434782608695], [0.391304347826087, 0.43478260869565216]], '76': [[0.41304347826086957, 0.17391304347826086], [0.391304347826087, 0.2608695652173913], [0.34782608695652173, 0.30434782608695654], [0.2608695652173913, 0.3695652173913043], [0.30434782608695654, 0.2826086956521739], [0.45652173913043476, 0.30434782608695654], [0.5, 0.32608695652173914], [0.4782608695652174, 0.2391304347826087], [0.3695652173913043, 0.5434782608695652], [0.3695652173913043, 0.717391304347826], [0.3695652173913043, 0.9130434782608695], [0.43478260869565216, 0.5434782608695652], [0.43478260869565216, 0.717391304347826], [0.43478260869565216, 0.9130434782608695], [0.391304347826087, 0.43478260869565216]], '78': [[0.41304347826086957, 0.15217391304347827], [0.391304347826087, 0.2608695652173913], [0.34782608695652173, 0.30434782608695654], [0.2826086956521739, 0.391304347826087], [0.2826086956521739, 0.30434782608695654], [0.45652173913043476, 0.30434782608695654], [0.5, 0.34782608695652173], [0.4782608695652174, 0.2608695652173913], [0.3695652173913043, 0.5434782608695652], [0.3695652173913043, 0.717391304347826], [0.34782608695652173, 0.8913043478260869], [0.41304347826086957, 0.5434782608695652], [0.43478260869565216, 0.717391304347826], [0.43478260869565216, 0.9130434782608695], [0.391304347826087, 0.41304347826086957]], '80': [[0.391304347826087, 0.15217391304347827], [0.391304347826087, 0.2608695652173913], [0.34782608695652173, 0.30434782608695654], [0.30434782608695654, 0.41304347826086957], [0.30434782608695654, 0.34782608695652173], [0.45652173913043476, 0.30434782608695654], [0.5, 0.34782608695652173], [0.4782608695652174, 0.2608695652173913], [0.3695652173913043, 0.5434782608695652], [0.3695652173913043, 0.717391304347826], [0.3695652173913043, 0.9130434782608695], [0.43478260869565216, 0.5434782608695652], [0.43478260869565216, 0.717391304347826], [0.43478260869565216, 0.9130434782608695], [0.391304347826087, 0.41304347826086957]], '82': [[0.391304347826087, 0.15217391304347827], [0.391304347826087, 0.2608695652173913], [0.34782608695652173, 0.32608695652173914], [0.32608695652173914, 0.43478260869565216], [0.34782608695652173, 0.41304347826086957], [0.43478260869565216, 0.2826086956521739], [0.5, 0.34782608695652173], [0.4782608695652174, 0.2608695652173913], [0.3695652173913043, 0.5434782608695652], [0.3695652173913043, 0.717391304347826], [0.3695652173913043, 0.9130434782608695], [0.41304347826086957, 0.5434782608695652], [0.43478260869565216, 0.717391304347826], [0.43478260869565216, 0.9130434782608695], [0.391304347826087, 0.43478260869565216]], '84': [[0.391304347826087, 0.15217391304347827], [0.391304347826087, 0.2608695652173913], [0.32608695652173914, 0.32608695652173914], [0.32608695652173914, 0.43478260869565216], [0.391304347826087, 0.4782608695652174], [0.43478260869565216, 0.30434782608695654], [0.4782608695652174, 0.3695652173913043], [0.45652173913043476, 0.2608695652173913], [0.3695652173913043, 0.5217391304347826], [0.3695652173913043, 0.6956521739130435], [0.3695652173913043, 0.8913043478260869], [0.41304347826086957, 0.5217391304347826], [0.43478260869565216, 0.6956521739130435], [0.43478260869565216, 0.9130434782608695], [0.391304347826087, 0.41304347826086957]], '86': [[0.3695652173913043, 0.17391304347826086], [0.391304347826087, 0.2826086956521739], [0.32608695652173914, 0.32608695652173914], [0.34782608695652173, 0.45652173913043476], [0.41304347826086957, 0.5434782608695652], [0.43478260869565216, 0.30434782608695654], [0.4782608695652174, 0.3695652173913043], [0.43478260869565216, 0.2608695652173913], [0.3695652173913043, 0.5217391304347826], [0.3695652173913043, 0.717391304347826], [0.3695652173913043, 0.9130434782608695], [0.43478260869565216, 0.5217391304347826], [0.43478260869565216, 0.717391304347826], [0.43478260869565216, 0.9130434782608695], [0.391304347826087, 0.41304347826086957]], '88': [[0.3695652173913043, 0.17391304347826086], [0.3695652173913043, 0.2608695652173913], [0.32608695652173914, 0.32608695652173914], [0.34782608695652173, 0.45652173913043476], [0.43478260869565216, 0.5434782608695652], [0.43478260869565216, 0.2826086956521739], [0.45652173913043476, 0.3695652173913043], [0.41304347826086957, 0.30434782608695654], [0.3695652173913043, 0.5434782608695652], [0.34782608695652173, 0.717391304347826], [0.34782608695652173, 0.8913043478260869], [0.41304347826086957, 0.5434782608695652], [0.43478260869565216, 0.717391304347826], [0.43478260869565216, 0.9130434782608695], [0.391304347826087, 0.43478260869565216]], '90': [[0.3695652173913043, 0.15217391304347827], [0.3695652173913043, 0.2608695652173913], [0.34782608695652173, 0.32608695652173914], [0.34782608695652173, 0.45652173913043476], [0.43478260869565216, 0.5217391304347826], [0.43478260869565216, 0.2826086956521739], [0.43478260869565216, 0.391304347826087], [0.391304347826087, 0.32608695652173914], [0.3695652173913043, 0.5434782608695652], [0.34782608695652173, 0.717391304347826], [0.34782608695652173, 0.8913043478260869], [0.41304347826086957, 0.5217391304347826], [0.43478260869565216, 0.717391304347826], [0.43478260869565216, 0.9130434782608695], [0.391304347826087, 0.41304347826086957]], '92': [[0.3695652173913043, 0.17391304347826086], [0.391304347826087, 0.2608695652173913], [0.34782608695652173, 0.30434782608695654], [0.3695652173913043, 0.45652173913043476], [0.43478260869565216, 0.5217391304347826], [0.43478260869565216, 0.2826086956521739], [0.43478260869565216, 0.41304347826086957], [0.3695652173913043, 0.391304347826087], [0.3695652173913043, 0.5217391304347826], [0.34782608695652173, 0.6956521739130435], [0.3695652173913043, 0.8913043478260869], [0.41304347826086957, 0.5217391304347826], [0.43478260869565216, 0.6956521739130435], [0.43478260869565216, 0.8913043478260869], [0.391304347826087, 0.41304347826086957]], '94': [[0.391304347826087, 0.17391304347826086], [0.391304347826087, 0.2608695652173913], [0.34782608695652173, 0.30434782608695654], [0.34782608695652173, 0.41304347826086957], [0.34782608695652173, 0.45652173913043476], [0.43478260869565216, 0.30434782608695654], [0.43478260869565216, 0.41304347826086957], [0.3695652173913043, 0.45652173913043476], [0.3695652173913043, 0.5217391304347826], [0.34782608695652173, 0.717391304347826], [0.3695652173913043, 0.9130434782608695], [0.41304347826086957, 0.5217391304347826], [0.43478260869565216, 0.717391304347826], [0.43478260869565216, 0.9130434782608695], [0.391304347826087, 0.41304347826086957]], '96': [[0.391304347826087, 0.17391304347826086], [0.391304347826087, 0.2608695652173913], [0.34782608695652173, 0.30434782608695654], [0.34782608695652173, 0.41304347826086957], [0.3695652173913043, 0.4782608695652174], [0.43478260869565216, 0.30434782608695654], [0.43478260869565216, 0.41304347826086957], [0.3695652173913043, 0.5], [0.3695652173913043, 0.5], [0.34782608695652173, 0.6739130434782609], [0.3695652173913043, 0.8913043478260869], [0.41304347826086957, 0.5], [0.43478260869565216, 0.6739130434782609], [0.43478260869565216, 0.8913043478260869], [0.391304347826087, 0.391304347826087]], '98': [[0.391304347826087, 0.17391304347826086], [0.391304347826087, 0.2608695652173913], [0.34782608695652173, 0.30434782608695654], [0.34782608695652173, 0.43478260869565216], [0.3695652173913043, 0.5217391304347826], [0.43478260869565216, 0.30434782608695654], [0.43478260869565216, 0.43478260869565216], [0.43478260869565216, 0.5217391304347826], [0.3695652173913043, 0.5], [0.34782608695652173, 0.6956521739130435], [0.3695652173913043, 0.8913043478260869], [0.41304347826086957, 0.5], [0.43478260869565216, 0.6739130434782609], [0.43478260869565216, 0.8913043478260869], [0.391304347826087, 0.41304347826086957]], '100': [[0.391304347826087, 0.15217391304347827], [0.391304347826087, 0.2608695652173913], [0.34782608695652173, 0.30434782608695654], [0.34782608695652173, 0.43478260869565216], [0.391304347826087, 0.5217391304347826], [0.43478260869565216, 0.32608695652173914], [0.45652173913043476, 0.43478260869565216], [0.391304347826087, 0.5217391304347826], [0.3695652173913043, 0.5], [0.34782608695652173, 0.6739130434782609], [0.3695652173913043, 0.8913043478260869], [0.41304347826086957, 0.5], [0.43478260869565216, 0.6521739130434783], [0.43478260869565216, 0.8913043478260869], [0.391304347826087, 0.41304347826086957]], '102': [[0.391304347826087, 0.15217391304347827], [0.391304347826087, 0.2608695652173913], [0.34782608695652173, 0.30434782608695654], [0.32608695652173914, 0.43478260869565216], [0.391304347826087, 0.5], [0.43478260869565216, 0.30434782608695654], [0.45652173913043476, 0.43478260869565216], [0.43478260869565216, 0.5], [0.3695652173913043, 0.5], [0.34782608695652173, 0.6739130434782609], [0.3695652173913043, 0.8260869565217391], [0.41304347826086957, 0.5], [0.43478260869565216, 0.6521739130434783], [0.43478260869565216, 0.8913043478260869], [0.391304347826087, 0.41304347826086957]], '104': [[0.391304347826087, 0.15217391304347827], [0.391304347826087, 0.2608695652173913], [0.34782608695652173, 0.30434782608695654], [0.32608695652173914, 0.43478260869565216], [0.34782608695652173, 0.4782608695652174], [0.43478260869565216, 0.30434782608695654], [0.4782608695652174, 0.41304347826086957], [0.4782608695652174, 0.45652173913043476], [0.3695652173913043, 0.5434782608695652], [0.3695652173913043, 0.6956521739130435], [0.3695652173913043, 0.9130434782608695], [0.43478260869565216, 0.5434782608695652], [0.43478260869565216, 0.6956521739130435], [0.43478260869565216, 0.8913043478260869], [0.391304347826087, 0.41304347826086957]], '106': [[0.391304347826087, 0.15217391304347827], [0.391304347826087, 0.2608695652173913], [0.34782608695652173, 0.32608695652173914], [0.32608695652173914, 0.43478260869565216], [0.30434782608695654, 0.5], [0.43478260869565216, 0.30434782608695654], [0.4782608695652174, 0.391304347826087], [0.5, 0.43478260869565216], [0.3695652173913043, 0.5434782608695652], [0.3695652173913043, 0.717391304347826], [0.3695652173913043, 0.9130434782608695], [0.43478260869565216, 0.5434782608695652], [0.43478260869565216, 0.6956521739130435], [0.43478260869565216, 0.8913043478260869], [0.391304347826087, 0.43478260869565216]], '108': [[0.3695652173913043, 0.15217391304347827], [0.391304347826087, 0.2608695652173913], [0.32608695652173914, 0.32608695652173914], [0.32608695652173914, 0.43478260869565216], [0.34782608695652173, 0.5217391304347826], [0.43478260869565216, 0.2826086956521739], [0.4782608695652174, 0.3695652173913043], [0.5217391304347826, 0.41304347826086957], [0.3695652173913043, 0.5434782608695652], [0.3695652173913043, 0.6956521739130435], [0.3695652173913043, 0.9130434782608695], [0.43478260869565216, 0.5434782608695652], [0.43478260869565216, 0.6956521739130435], [0.43478260869565216, 0.8913043478260869], [0.391304347826087, 0.43478260869565216]], '110': [[0.3695652173913043, 0.15217391304347827], [0.3695652173913043, 0.2608695652173913], [0.34782608695652173, 0.32608695652173914], [0.32608695652173914, 0.43478260869565216], [0.3695652173913043, 0.5217391304347826], [0.43478260869565216, 0.2826086956521739], [0.4782608695652174, 0.34782608695652173], [0.5217391304347826, 0.41304347826086957], [0.3695652173913043, 0.5434782608695652], [0.3695652173913043, 0.717391304347826], [0.3695652173913043, 0.9130434782608695], [0.43478260869565216, 0.5434782608695652], [0.43478260869565216, 0.6956521739130435], [0.43478260869565216, 0.8913043478260869], [0.391304347826087, 0.43478260869565216]], '112': [[0.3695652173913043, 0.17391304347826086], [0.391304347826087, 0.2608695652173913], [0.32608695652173914, 0.34782608695652173], [0.34782608695652173, 0.43478260869565216], [0.3695652173913043, 0.5217391304347826], [0.43478260869565216, 0.2826086956521739], [0.5, 0.34782608695652173], [0.5217391304347826, 0.41304347826086957], [0.3695652173913043, 0.5434782608695652], [0.3695652173913043, 0.717391304347826], [0.3695652173913043, 0.9130434782608695], [0.43478260869565216, 0.5434782608695652], [0.43478260869565216, 0.717391304347826], [0.45652173913043476, 0.8913043478260869], [0.391304347826087, 0.43478260869565216]], '114': [[0.3695652173913043, 0.15217391304347827], [0.391304347826087, 0.2608695652173913], [0.32608695652173914, 0.32608695652173914], [0.32608695652173914, 0.43478260869565216], [0.3695652173913043, 0.5217391304347826], [0.43478260869565216, 0.2826086956521739], [0.5, 0.34782608695652173], [0.5217391304347826, 0.43478260869565216], [0.3695652173913043, 0.5434782608695652], [0.3695652173913043, 0.717391304347826], [0.3695652173913043, 0.9130434782608695], [0.43478260869565216, 0.5434782608695652], [0.43478260869565216, 0.6956521739130435], [0.45652173913043476, 0.8913043478260869], [0.391304347826087, 0.43478260869565216]], '116': [[0.391304347826087, 0.15217391304347827], [0.391304347826087, 0.2608695652173913], [0.34782608695652173, 0.32608695652173914], [0.32608695652173914, 0.43478260869565216], [0.3695652173913043, 0.5217391304347826], [0.43478260869565216, 0.2826086956521739], [0.4782608695652174, 0.3695652173913043], [0.5, 0.45652173913043476], [0.3695652173913043, 0.5434782608695652], [0.3695652173913043, 0.717391304347826], [0.3695652173913043, 0.9130434782608695], [0.43478260869565216, 0.5434782608695652], [0.43478260869565216, 0.6956521739130435], [0.45652173913043476, 0.8913043478260869], [0.391304347826087, 0.41304347826086957]], '118': [[0.391304347826087, 0.15217391304347827], [0.391304347826087, 0.2608695652173913], [0.34782608695652173, 0.30434782608695654], [0.32608695652173914, 0.43478260869565216], [0.3695652173913043, 0.5217391304347826], [0.43478260869565216, 0.30434782608695654], [0.4782608695652174, 0.41304347826086957], [0.4782608695652174, 0.4782608695652174], [0.391304347826087, 0.5434782608695652], [0.3695652173913043, 0.6956521739130435], [0.3695652173913043, 0.9130434782608695], [0.43478260869565216, 0.5217391304347826], [0.43478260869565216, 0.6956521739130435], [0.45652173913043476, 0.8913043478260869], [0.391304347826087, 0.41304347826086957]], '120': [[0.41304347826086957, 0.17391304347826086], [0.391304347826087, 0.2608695652173913], [0.34782608695652173, 0.32608695652173914], [0.32608695652173914, 0.43478260869565216], [0.3695652173913043, 0.5217391304347826], [0.45652173913043476, 0.32608695652173914], [0.43478260869565216, 0.41304347826086957], [0.43478260869565216, 0.5], [0.3695652173913043, 0.5434782608695652], [0.3695652173913043, 0.717391304347826], [0.3695652173913043, 0.9130434782608695], [0.43478260869565216, 0.5434782608695652], [0.43478260869565216, 0.717391304347826], [0.45652173913043476, 0.8913043478260869], [0.41304347826086957, 0.43478260869565216]]};
    var A = Object.keys(data).map(function (key) {
        return [parseInt(key), ...data[key]]
    });
    var lastTime;
    var current = 0;
    var fps = 33; //66 for demo

    var paused = false;

    function pausedAnimation() {
        paused = true
    }

    function playAnimation() {
        paused = false;
        lastTime = new Date().getTime() - now + lastTime
    }

    function scrubAnimation(pos) { // pos is fraction through the video (i.e. 50\% through, etc.)
        paused = false;
        for (var i = A.length - 1; i >= 0; i--) {
            if (A[i][0] <= pos * fps) {
                current = i;
                return;
            }
        }
    }

    var canvas = $("#overlay");
    var h;
    var w;
    var now;
    var connections = [[0, 1], [1, 2], [2, 3], [3, 4], [4,5], [2, 6], [6, 7], [7,8],[2,15],[15,12],[15,9],[9,10],[10,11],[12,13],[13,14]];

    var ctx = canvas[0].getContext("2d");

    function draw(a1) {
        ctx.beginPath();
        ctx.fillStyle = "red";
        ctx.strokeStyle = "#FF0000";
        for (var i = 0; i < a1.length; i++) {
            ctx.fillRect(a1[i][0] * w - 5, a1[i][1] * h - 5, 10, 10);
        }
        for (var j = 0; j < connections.length; j++) {
            var index1 = connections[j][0];
            var index2 = connections[j][1];

            ctx.moveTo(a1[index1][0] * w, a1[index1][1] * h);
            ctx.lineTo(a1[index2][0] * w, a1[index2][1] * h);
        }
        ctx.stroke();

    }

    function animate() {
        if (!paused) {
            now = new Date().getTime();
            var n = A[current + 1];
            var c = A[current];

            if ((now - lastTime) / 1000 > (n[0] - c[0]) / fps) {
                current += 1;
                lastTime = now;
            }
            n = A[current + 1];
            c = A[current];
            var delta = (now - lastTime) / 1000 * fps / (n[0] - c[0]);
            var toDraw = [];

            for (var i = 0; i < n.length; i++) {
                toDraw.push([c[i][0] + delta * (n[i][0] - c[i][0]), c[i][1] + delta * (n[i][1] - c[i][1])])
            }


            ctx.clearRect(0, 0, w, h);
            draw(toDraw);
            requestAnimationFrame(function () {
                animate()
            })
        }

    }

    function startDraw() {
        h = $("#student-video").outerHeight();
        w = $("#student-video").outerWidth();
        canvas.attr("height", h);
        canvas.attr("width", w);
        lastTime = new Date().getTime();
        animate()
    }

</script>


<script>

    let u = new URL(window.location.href);
    var teacherSource = u.searchParams.get("teacher");
    var studentSource = u.searchParams.get("student");

    var config = {
        apiKey: "AIzaSyBOxP1HtVP0uUcfrwRPJs8PcMDB-QS1akQ",
        authDomain: "choreocoach.firebaseapp.com",
        databaseURL: "https://choreocoach.firebaseio.com",
        projectId: "choreocoach",
        storageBucket: "choreocoach.appspot.com",
        messagingSenderId: "801043437723"
    };
    firebase.initializeApp(config);

    videojs('teacher-video', {
        errorDisplay: false
    });
    videojs('student-video', {
        errorDisplay: false
    });
    var teach = videojs('teacher-video');
    var student = videojs('student-video');
    var pause = function () {
        $("#playpause").attr('checked', true);
        pausedAnimation()
    };
    var play = function () {
        $("#playpause").attr('checked', null)
        playAnimation()
    };

    teach.on('pause', pause);
    teach.on('ended', pause);
    teach.on('play', play);
    student.on('pause', pause);
    student.on('ended', pause);
    student.on('play', play);
    student.on('play', startDraw);

    var storage = firebase.storage();
    var storageRef = storage.ref();

    function renderVid(vidId, vidName, cb) {
        var vid = videojs(vidId);
        vid.loadingSpinner.show();
        var video = storageRef.child(vidName);
        video.getDownloadURL().then(function (url) {
            vid.src([{type: 'video/mp4', src: url}]);
            vid.loadingSpinner.hide();
            if (cb) {
                cb()
            }
        }).catch(function (error) {

        });
    }

    renderVid('teacher-video', teacherSource + '.mp4');
    renderVid('student-video', studentSource + '.mp4');

    function playpause(e) {
        if (!e.srcElement.checked) {
            videojs('teacher-video').play();
            videojs('student-video').play()
        } else {
            videojs('teacher-video').pause();
            videojs('student-video').pause()
        }

    }

    function analyze() {
        var x = XMLHttpRequest();
        x.open("POST", "http://127.0.0.1:5000/api?input=" + teacherSource + "&model=" + studentSource);
        x.send();
    }

    getTimestampColors();


    function getTimestampColors() {
<<<<<<< Updated upstream
        return firebase.database().ref('/scores').once('value').then(function (snapshot) {
            var scores = snapshot.val().split(" ");
            var conversion = {"1": "green", "2": "gold", "3": "red"};

            scores = scores.map(function (v) {
                console.log(conversion[v.toString()]);
                return conversion[v.toString()];
            });
            console.log(scores);
            updateTimestamp(scores);
=======
        var scoreRef = firebase.database().ref('/' + teacherSource.toLowerCase());
        scoreRef.on('value', function(snapshot) {
            console.log(snapshot.val());
            console.log(Object.keys(snapshot.val()));
            console.log(studentSource.toLowerCase());
            if (Object.keys(snapshot.val()).includes(studentSource.toLowerCase())) {
                console.log('HELLOOOOO');
                var scores = snapshot.val()[studentSource.toLowerCase()].split(" ");
                var conversion = {"1":"green", "2": "gold", "3": "red"};

                scores = scores.map(function(v){
                    console.log(conversion[v.toString()]);
                    return conversion[v.toString()];
                });
                console.log(scores);
                updateTimestamp(scores);
            } else {
                analyze();
            }
>>>>>>> Stashed changes
        });
    }

    function updateTimestamp(colors) {
        console.log(colors.length);
        console.log(colors);
        for (var i = 0; i < colors.length; i++) {
            var a = $("#tick").clone();
            a.attr('id', '' + i);
            a.appendTo('#scrollBar');
            a.css("backgroundColor", colors[i]);
            a.css("width", (100 / colors.length).toString() + "%");
        }
        $("#tick").remove();

    }


    function timestampClick(event) {
        let id = parseInt($(event.target).parent()[0].id);
        //console.log($(event.target).parent());
        console.log(id);
        var sPlayer = videojs("student-video");
        sPlayer.currentTime(sPlayer.duration() * id / 60);

        var tPlayer = videojs("teacher-video");
        tPlayer.currentTime(tPlayer.duration() * id / 60);
        scrubAnimation(id / 60);
        sPlayer.play();
        tPlayer.play();

    }

</script>


</body>
</html>