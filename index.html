<!doctype html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <link href="./styles.css" rel="stylesheet">

    <title>ChoreoCompare</title>
    <link href="https://vjs.zencdn.net/7.2.4/video-js.css" rel="stylesheet">
</head>

<body>

<div id="videos-container">
    <div id="teacher" class="video-container">
        <h1>Teacher</h1>
        <video id="teacher-video" class="video-js vjs-waiting" controls data-setup='{"fluid": true}'>
            <p class="vjs-no-js">
                To view this video please enable JavaScript, and consider upgrading to a web browser that
                <a href="https://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a>
            </p>
        </video>
    </div>

    <div id="student" class="video-container">
        <h1>Student</h1>
        <video id="student-video" class="video-js" controls preload="auto" data-setup='{"fluid": true}'>
            <source src="Student.mp4" type="video/mp4">
            <p class="vjs-no-js">
                To view this video please enable JavaScript, and consider upgrading to a web browser that
                <a href="https://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a>
            </p>
        </video>
    </div>
</div>

<div class="container">
    <div id="scrollBar">
        <div id="tick" class="ticker">
            <button onclick="timestampClick(event)">
            </button>
        </div>
    </div>
    <p class='time' style="float:left">0:00</p>
    <p class='time' style="float:right">0:05</p>
</div>


<script src="https://vjs.zencdn.net/7.2.4/video.js"></script>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>

<script src="https://www.gstatic.com/firebasejs/5.5.7/firebase.js"></script>
<script>
    var config = {
        apiKey: "AIzaSyBOxP1HtVP0uUcfrwRPJs8PcMDB-QS1akQ",
        authDomain: "choreocoach.firebaseapp.com",
        databaseURL: "https://choreocoach.firebaseio.com",
        projectId: "choreocoach",
        storageBucket: "choreocoach.appspot.com",
        messagingSenderId: "801043437723"
    };
    firebase.initializeApp(config);

    var teacher = videojs('teacher-video');
    teacher.loadingSpinner.show();
    var storage = firebase.storage();
    var storageRef = storage.ref();
    var vid = storageRef.child('Student.mp4');
    vid.getDownloadURL().then(function(url) {
        teacher.src([{type: 'video/mp4', src: url}]);
        teacher.loadingSpinner.hide();
    }).catch(function(error) {

    });
</script>

<script>
    $(document).ready(function () {
        for (var i = 0; i < 60; i++) {
            var a = $("#tick").clone();
            a.attr('id', '' + i);
            a.appendTo('#scrollBar');
        }
    });

    function timestampClick(event) {
        let id = parseInt($(event.target).parent()[0].id);
        //console.log($(event.target).parent());
        console.log(id);
        var sPlayer = videojs("student-video");
        sPlayer.currentTime(sPlayer.duration() * id / 60);

        var tPlayer = videojs("teacher-video");
        tPlayer.currentTime(tPlayer.duration() * id / 60);

        sPlayer.play();
        tPlayer.play();

    }

</script>

</body>
</html>